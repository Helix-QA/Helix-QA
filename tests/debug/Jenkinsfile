properties([
    parameters([
        [
            $class: 'CascadeChoiceParameter',
            name: 'SERVICES',
            description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º)',
            choiceType: 'PT_CHECKBOX',
            script: [
                $class: 'GroovyScript',
                script: [
                    $class: 'SecureGroovyScript',
                    script: '''
                        return [
                            "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ üîµ DEV ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ",
                            "  frontend-dev",
                            "  backend-dev",
                            "  db-dev",
                            "",
                            "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ üî¥ PROD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ",
                            "  frontend-prod",
                            "  backend-prod",
                            "  db-prod",
                            "",
                            "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ üü¢ STAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ",
                            "  frontend-stage",
                            "  backend-stage",
                            "  monitoring-stage"
                        ]
                    ''',
                    sandbox: true
                ]
            ]
        ]
    ])
])

pipeline {
    agent any
    stages {
        stage('Run') {
            steps {
                script {
                    echo "–í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã: ${params.SERVICES}"
                    if (params.SERVICES) {
                        // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏)
                        def selectedServices = params.SERVICES.findAll { 
                            it && !it.startsWith("‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ") && it.trim() 
                        }
                        selectedServices.each { service ->
                            echo "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º: ${service.trim()}"
                        }
                    }
                }
            }
        }
    }
}