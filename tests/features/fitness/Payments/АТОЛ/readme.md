# Проверка округления по тикету Евгения Б. 558131 #

Для автотестирования созданы следующие сценарии:

- **`Rounding.`**
- **`ExportRouding`**

1. **Сценарий: 01.** Создание данных для проверки округления в Фитнесе.

Создаются для тестирования клиент, услуга персональная и групповая, также запоминается ссылка на розничный вид цен, т.к в ней будет меняться округление.

2. **Сценарий: 02.** Проверка созданных данных.

Из экспорта запускает проверку на наличие ошибок, если они были, то фича файл останавливается.

3. **Сценарий: 03.** Создание бонусного счета для клиента.

В рамках тестирования округления обязательно должен быть бонусный счет у клиента, т.к сам функционал округления под оплаты с бонусного счета делался.

4. **Сценарий: 04.** Проверка округления 0.01.

>   **ВАЖНО!** Каждое округление проверяется через экспортный сценарий с указанием нужной суммы. И в этом же эскпорте происходит расчет нужных сумм.

# Проверка СистемаНалогообложенияДляУслуг (TaxationSystem) 0-5 #

Для автотестирования созданы следующие сценарии:

- **`TaxationSystem.`**
- **`Export_Оплаты и возвраты АТОЛ`**

1. **Сценарий: 01.** Первоначальная настройка.

Идет удаление ранее созданных систем налогоображения и создание нужный для тестирования объектов.

2. **Сценарий: 02.** СистемаНалогообложенияДляУслуг - Общая - 0.

В организации устанавливается для товаров, услуг и авансом СНО соответствующая и без учета НДС. И через экспортный сценарий делаются продажи и оплаты для проверки XML чека.


Все сценарии вплоть до последнего реализованы по аналогии со сценарием 02.
---

# Проверка возвратов (OperationType) АТОЛ #

Для автотестирования созданы следующие сценарии:

- **`Возвраты OperationType.`**
- **`Export_Оплаты и возвраты АТОЛ`**

1. **Сценарий: 01.** Первоначальная настройка.

Создаются клиент и персональная услуга для продажи.

2. **Сценарий: 02.** OperationType-2 (полный возврат).

Создание продажи и ее оплата. После оплаты формируется на основании продажи документ возврата, затем проверяется XML чек по оплаченному возврату.

3. **Сценарий: 03.** OperationType-2 (частичный возврат номенклатуры)

Создается продажа, на ее основании возврат на не полную сумму и проверяется XML.

Все остальные сценарии реализованы так, чтобы отрабатывало условие которые пишется в наименовании сценария в скобках.
---

# Проверка маркированного товара АТОЛ #

Для автотестирования созданы следующие сценарии:

- **`МаркировкаТоваров.`**
- **`ExportМаркировкаТовара`**

1. **Сценарий: 01.** Настройка среды для тестирования маркировки.

Все настройки первого сценария реализованы в соответствие с инструкцией на нашем сайте. [>>Клик<<](https://helixtest.atlassian.net/wiki/spaces/ins/pages/2949139#%D0%9C%D0%B0%D1%80%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D1%82%D0%BE%D0%B2%D0%B0%D1%80%D1%8B(%D0%94%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D0%B8-%D0%BA%D0%B0%D0%BA-%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D1%8F%D1%82%D1%8C))

2. **Сценарий: 02.** Продажа и возврат по маркированному товару.

Включается константа тестирования ККТ, с ее помощью продается товар с корректной маркировкой и проходит проверка по XML чеку как мы передаем маркировку. Затем константа обратно отключается и уже идет проверка ввода некорректной маркировки и последующих сообщений.

Дальше аналогично идет проверка под барменом и на формах быстрой продажи и пакетной.
---

# Проверка передачи ставок НДС #

Для автотестирования созданы следующие сценарии:

- **`НДС.`**
- **`Оплаты(экспорт)`**

1. **Сценарий: 01.** Первоначальная настройка.

Создаются: Клиент, две Персональные услуги и случайное число. Также в две переменные запоминаютс значение "4" и "Передача с полной оплатой", сделано это для того чтобы сразу иметь значения для проверки XML, т.к в текущем тесте все оплаты будут полными.

2. **Сценарий: 02.** VAT=none.

В начале сценария запоминаются необходимые переменные для проверки ставки НДС. Потом через вызов ряда экспортных сценариев создаются продажи и после их оплаты сразу проверяется XML с ранее упомянутыми переменными.

Следующие сценарии реализованны аналогично первому, за исключением тех, что идут после проверки расчетной ставки НДС, там идет проверка ставки НДС в перемешку с СНО.
---

# Проверка PaymentMethod 1-7  АТОЛ #

Для автотестирования созданы следующие сценарии:

- **`Оплаты PaymentMethod.`**
- **`Оплаты(экспорт)`**

1. **Сценарий: 01.** Первоначальная настройка.

Создаются клиент и персональная услуга.

2. **Сценарий: 02.** Проверка PaymentMethod 1 (Предоплата полная).

Включается в организации авансовая схема пробития услуг. Создается продажа с полной оплатой и проверяется XML.

При проверке взноса на лиц.счет отключается авансовая схема пробития услуг.Остальные сценарии реализованы так, чтобы попадать под нужный PaymentMethod с дальнейшей проверкой XML.



