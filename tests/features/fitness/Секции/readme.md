# Описание автотеста по секционный занятиям.

Для автотестирования созданы следующий сценарий:

-   **`Sections.`**

<details><summary>(Выпадающий список)Описание сценариев по автотесту Секции: </summary>

-   **Сценарий: Заполнение данными.**

Удаляются все переменные, секции и их циклы. Создаются: клиент 1 и 2, тренер, помещение, услуга групповая 1 и 2, шаблон сообщений, секция, цикл и пакет.

-   **Сценарий: Проверка на ошибки.**

Проверяет были ли ошибки при выполнение сценария "Сценарий: Заполнение данными.", если ошибки были, то останавливает выполнение всего фича файла.

-   **Сценарий: Я проверяю кол-во дней на которые могу записаться.**

Через код встроенного языка определяется сколько понедельников, сред и пятниц в месяце, суммирует их и это кол-во дней должно быть равно кол-ву занятий которые будут доступны для записи на секционные занятия. Открывается список занятий, в нем делается отбор по секции1, потом считывается сколько строк в списке(кол-во строк равно количеству занятий в секции), потом сверяется равна ли переменная с кол-ом строк в списке с переменной где общая сумма Пн,Ср и Пт.

Потом продается секционный пакет, и на форме выбора занятий сверяется также их кол-во.

-   **Сценарий: Проверка ограничения по продажи пакета на цикл где нет свободных мест.**

После махинаций и записи клиента на занятия на текущий цикл(месяц) в сценарии выше в этом сценарии проверяется пропал ли текущий месяц из списка циклов на которые можно записаться.

-   **Сценарий: Создание среды для проверки пропуска занятий.**

Открывается список Занятий и в этом списке переходится к первому занятию и открывает его и переводит в статус Выполнено. Потом создается Секция2, эта новая секция затем добавляется в раздел "Пропуск занятий" в Секции1 в качестве отработки.

-   **Сценарий: Проверка автопродления и скидки на новый пакет услуг.**

Создается пустая переменная "Автопродление" чтобы использовать ее дальше в коде встроенного языка. Открывается секция1, в разделе Продление настраивается всё что нужно по сценарию, затем по коду встроенного языка высчитывается кол-во дней в периоде от текущего числа и это значение записывается в поле "КоличествоДнейДоОкончанияДляПродления" чтобы сегодня сразу же произошло продление. 

Затем сохраняются настройки и запускается регламент "Обновление закрытия дня". После запуска открывается карточка Клиента и в ней переходится в раздел "Продажи" и по шаблону проверяется чтобы продажи было 2.

-   **Сценарий: Проверка информирование об исключении из секции.**

Открывается секция1, в ней меняется емкость группы на 2, сохраняются изменения и секция1 открывается повторно. И уже в этой секции1 выставляются настройки для исключения клиента за неоплату.

Делается продажа секционного пакета клиенту2, потом запускается регламент закрытия дня. После регламента заходится в карточки клиента 1 и 2 в раздел "SMS" и там проверяется какие рассылки были сделаны.

-   **Сценарий: Проверка исключения.**

Происходит продажа секционного пакета услуг клиенту 2, после продажи у проданного пакета меняется дата активации на Вчера. Заходится в секцию2 и добавляем в ней настройки для исключения клиента из секции. После запускается регламент и проверяет в секции 2 пропал ли из состав клиент.

-   **Сценарий: Проверка цены секционного пакета услуг в зависимости от кол-ва занятий.**

Создается секция3, пересоздается клиент. В секции 3 создаются настройки пакета за занятия. Потом продается пакет и в момент его продажи с помощью экспортного сценария "Я выполняю расчет сумм за занятия." происходит расчет сумм.

-   **Сценарий: Проверка функционала "Каникулы".**

Создается секция без цикла. Продается ее пакет услуг, а затем идет проверка есть ли занятия в промежутке с 01 по 03 числа.
 
</details>