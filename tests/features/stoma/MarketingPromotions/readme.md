# Описание автотеста по маркетинговым акциям.

Для автотестирования созданы следующий сценарий:

-   **`MarketingPromotionStoma.`**

<details><summary>(Выпадающий список)Описание сценариев автотеста по МА: </summary>

-   **Сценарий: Создание первоначальных данных для тестирования МА.**

Создаются два клиента, услуга, врач и  МА с условием применения - Всегда,способы - все.Ограничено списком пациентов.

-   **Сценарий: Проверка созданных данных.**

Остановка выполнения фичи если были ошибки выше.

-   **Сценарий: Проверка МА с условием применения - Всегда,способы - все.Ограничено списком пациентов.**

Создается продажа Клиенту1 и проверяется как на форме и в табличной части подтягиваются МА/Скидки.

-   **Сценарий: Проверка МА с условием применения - Всегда,способы - все.Ограничено сегментом пациентов.**

В уже созданных МА меняются условия на ограничения на сегмент пациентов. Затем создается продажа и проверяется применилась ли МА.

-   **Сценарий: Проверка МА с условием применения - Всегда, способы - все. Ограничено видом карт.**

Создается новый вид карт, который потом добавляется в карточку клиента1. Потом в МА меняется условие на ограничения по видам дисконтных карт. После делается продажа и проверяются МА.

-   **Сценарий: Проверка МА с условием применения - Всегда. Ограничено пациент рекламный источник.**

Открывается карточка клиента1, в ней меняется истоник информации на "Другой пациент стоматологии" и выбирает источником клиент2.

После в МА условие меняется на Ограничено пациент рекламный источник. Создается продажа и проверяется как применились МА.

-   **Сценарий: Проверка ограничения по клиенту в МА.**

В данном сценарии проверяется ограничение сколько раз применится МА по пациенту.

-   **Сценарий: Проверка и создание условия видом цен.**

Создается МА с условием применения - Всегда,способы - Видом цен. Делается продажа и проверяется как применится МА.

-   **Сценарий: Проверка МА с условием - День рождения.**

Создается  МА с условием применения - День рождения. Делается продажа клиенту1 у которого сегодня ДР и проверяется применилась ли скидка.

-   **Сценарий: Проверка МА с условием - Количество в документе Приём.**

Создается МА с условием применения - Количество в документе приём. Создает приём и проверяется применилась ли МА.

-   **Сценарий: Проверка МА с условием - Количество продаж по пациенту.**

Создается МА с условием применения - Количество продаж по пациенту. Создается первая продажа клиенту1 и оплачивается, потом создается  вторая и проверяется что МА применится.

-   **Сценарий: Проверка МА с условием - Количество продаж по карте.**

Создается МА с условием применения - Количество продаж по карте. Создается продажа клиенту1 и проверяется что МА применится.

-   **Сценарий: Проверка МА с условием - Когда предыдущий прием содержит номенклатуру.**

Создается МА с условием применения - Когда предыдущий прием содержит номенклатуру. Создается продажа клиенту1 и проверяется что МА применится.

-   **Сценарий: Проверка МА с условием - Каждая вторая покупка по пациенту/карте.**

Создается МА с условием применения - Каждая третья покупка по пациенту/карте. Создается продажа клиенту1 и проверяется что МА применится.

-   **Сценарий: Проверка МА с условием применения - Остаток на лицевом счете.**

Создается МА с условием применения - Остаток на лицевом счете. Открывается карточки клиента1, делается взнос на лиц.счет. Потом заходится в карточку клиента2 в степень родства включается настройка что лицевые счета общие. Потом делается взнос на лиц.счет клиенту2.

Создаются продажи клиенту1 и 2 и проверяется что МА применится.

-   **Сценарий: Проверка МА с условием применения - Промокод.**

Создается МА с условием применения - Промокод. Первому клиенту добавляется промокод и записывается в переменную. Потом делается продажа клиенту2 и в ней используется промокод для проверки МА.

-   **Сценарий: Проверка МА с условием применения - Сумма в приёме не более/не менее.**

Создается МА с условием применения - Сумма. Создается продажа клиенту1 и проверяется что МА применится.

-   **Сценарий: Проверка МА с условием применения - Сумма продаж по пациенту/карте не более/не менее.**

Ранее уже настроенные МА перенастраиваются под текущий сценарий. Затем создается продажа на клиента1 и проверяется что МА применится.

-   **Проверка МА с условием применения - Бонус рефералу (промокод).**









</details>











