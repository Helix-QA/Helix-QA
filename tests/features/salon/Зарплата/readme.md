# Описание автотеста по зарабатной плате.
https://tracker.yandex.ru/AVTOMATIZACIYA-79

Для автотестирования созданы следующий сценарий:

-   **`zarplataSalon.`**


<details><summary>(Выпадающий список)Описание сценариев автотеста по заратной плате: </summary>

-   **Сценарий: Создание пользователя - Бухгалтер.**

Под Админом удаляется пользователь бухгалтерии, создается новый для тестирования, добавляются новому пользователю новые права для тестирования ЗП.

-   **Сценарий: Проверка на ошибки и заход под Бухгалтера.**

Проверяется первый сценарий на наличие ошибок, в случае если их нет то фича файла продолжает своё выполнение. После проверки выходится из под Админа и заходится под новым бухгалтером.

-   **Сценарий: Блок 1:Оклад - не зависит от выработки(Оклад1).**

Удаляются все переменные > Через регистр "КалендарныеГрафики" на первое число месяца выставляется константа "ДеньВключенВГрафик", делается это для того чтобы избежать праздничные дни > Создается мастер салона красоты > Соответствующий сценарию оклад добавляется мастеру в Начисления и удержания > После добавления начисления создается документ Начисление зарплаты и проверяется что таблица начисления равна той что указана в шаблоне.

После проверки добавленное начисление удаляется из карточки мастера.

-   **Сценарий: Блок1: Оклад - зависит от выработки по дням(Оклад2)**

В карточке мастера создается новый оклад и добавляется в начисления и удержания > Создается табель рабочего времени с указанием нашего мастера > После создания табеля,  создается документ Начисления зарплаты и проверяется что таблица начисления равна той что указана в шаблоне.

После проверки добавленное начисление удаляется из карточки мастера.

-   **Сценарий: Блок1: Оклад - зависит от выработки по часам(Оклад3)**

Работает по аналогии как сценарий "Блок 1:Оклад - не зависит от выработки(Оклад1)."

-   **Сценарий: Блок1: Тариф - за час(Тариф1).**
-   **Сценарий: Блок1: Тариф - за выход(Тариф2).**

Удаляются переменные > Создается новый мастер и создается начисление согласно сценарию > Создается табель учета рабочего времени с указанием мастера > Создается документ Начисление зарплаты и проверяется что таблица начисления равна той что указана в шаблоне.

После проверки добавленное начисление удаляется из карточки мастера.

-   **Сценарий: Блок1: Тариф - за выполнение плана(Тариф3).**

Мастеру добавляется соответствующие сценарию начисление > Создается услуга > Открывается карточка мастера и в разделе Услуги сотрудника добавляется эта новая услуга > Создается продажа этой услуг, а после нее создается план продаж на этого мастера > Создается документ Начисление зарплаты и проверяется что таблица начисления равна той что указана в шаблоне.

После проверки добавленное начисление удаляется из карточки мастера.

-   **Сценарий: Блок1: Процент - продаж сотрудника(Процент1).**
-   **Сценарий: Блок1: Процент - продаж всего салона(Процент2).**
-   **Сценарий: Блок1: Процент - продаж всего салона по графику работы сотрудника(Процент3).**
-   **Сценарий: Блок1: Процент - стоимости оформленных продаж(Процент5).**
-   **Сценарий: Блок1: Процент - стоимости оказанных сотрудником услуг(Процент6).**
-   **Сценарий: Блок1: Процент - стоимости оказанных и оплаченных сотрудником услуг и проданных товаров(Процент7).**
-   **Сценарий: Блок1: Процент - стоимости оказанных услуг сотрудником в качестве ассистента(Процент8).**
-   **Сценарий: Блок1: Процент - продаж сотрудника в качестве ассистента(Процент9).**

По сути все эти сценарии работают одинаково(могут использовать уже существующие продажи/визиты, или же создаются новые), за исключением некоторых моментов, где нужны другие способы активация условий начисления.

После проверки добавленное начисление удаляется из карточки мастера.

-   **Сценарий:Блок1: Прочее (ручное).**

Создается новое ручное начисление и добавляется в карточку сотрудника > Создается документ Начисление зарплаты, в нем выбирает ручное начисление и указывается сумма, и проверяется что таблица начисления равна той что указана в шаблоне.

После проверки добавленное начисление удаляется из карточки мастера.

-   **Сценарий: Блок1- удержание за месяц(Удержание1)**
-   **Сценарий: Блок1- удержание за период начисления(Удержание2)**

Создается начисление согласно сценарию > Создается документ Начисление зарплаты и проверяется что таблица начисления равна той что указана в шаблоне.

После проверки добавленное начисление удаляется из карточки мастера.


-   **Сценарий: Блок2 - Максимум**

Удаляются переменные > Создается новы ймастер салона красоты > Создается группа начисления "Максимум" и в ней два разных оклада(10к и 20к).

Потом настройки группы меняются так, Максимум > Минимум > Сумма. После каждой смены настройки создается документ Начисление зарплаты, в нем выбирает ручное начисление и указывается сумма, и проверяется что таблица начисления равна той что указана в шаблоне.

После того как последняя настройка "Сумма" отработала, то документ начисления сохраняется и по нему идет проверка всех печатных форм.
</details>